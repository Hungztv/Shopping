@model LoginViewModel
@{
    ViewData["Title"] = "Đăng nhập";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<section id="login" class="login-section">
    <div class="container">
        <div class="row min-vh-80 align-items-center justify-content-center">
            <!-- Login Card -->
            <div class="col-lg-10">
                <div class="login-card shadow-lg">
                    <div class="row g-0">
                        <!-- Left Side - Illustration -->
                        <div class="col-md-6 login-illustration d-none d-md-flex">
                            <div class="illustration-content">
                                <div class="illustration-icon">
                                    <i class="fas fa-shopping-bag"></i>
                                </div>
                                <h3 class="text-white fw-bold mb-3">Chào mừng trở lại!</h3>
                                <p class="text-white-50">Đăng nhập để tiếp tục mua sắm và trải nghiệm những sản phẩm
                                    tuyệt vời.</p>
                                <div class="features mt-4">
                                    <div class="feature-item">
                                        <i class="fas fa-check-circle"></i>
                                        <span>Mua sắm dễ dàng</span>
                                    </div>
                                    <div class="feature-item">
                                        <i class="fas fa-check-circle"></i>
                                        <span>Giao hàng nhanh chóng</span>
                                    </div>
                                    <div class="feature-item">
                                        <i class="fas fa-check-circle"></i>
                                        <span>Hỗ trợ 24/7</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Right Side - Login Form -->
                        <div class="col-md-6">
                            <div class="login-form-wrapper">
                                <div class="text-center mb-4">
                                    <div class="login-icon mb-3">
                                        <i class="fas fa-user-circle"></i>
                                    </div>
                                    <h2 class="fw-bold mb-2">Đăng nhập</h2>
                                    <p class="text-muted">Nhập thông tin tài khoản của bạn</p>
                                </div>

                                <div asp-validation-summary="ModelOnly"
                                    class="alert alert-danger alert-dismissible fade show" role="alert">
                                    <i class="fas fa-exclamation-circle me-2"></i>
                                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                                </div>

                                <form asp-action="Login" asp-controller="Account" method="post" class="login-form">
                                    <div class="form-group mb-3">
                                        <label asp-for="UserName" class="form-label fw-semibold">
                                            <i class="fas fa-user me-2 text-primary"></i>Tên đăng nhập
                                        </label>
                                        <input asp-for="UserName" class="form-control form-control-lg"
                                            placeholder="Nhập tên đăng nhập" required />
                                        <span asp-validation-for="UserName" class="text-danger small"></span>
                                    </div>

                                    <div class="form-group mb-3">
                                        <label asp-for="Password" class="form-label fw-semibold">
                                            <i class="fas fa-lock me-2 text-primary"></i>Mật khẩu
                                        </label>
                                        <div class="input-group input-group-lg">
                                            <input asp-for="Password" type="password" class="form-control"
                                                placeholder="Nhập mật khẩu" required id="passwordInput" />
                                            <button type="button" class="btn btn-outline-secondary" id="togglePassword">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                        <span asp-validation-for="Password" class="text-danger small"></span>
                                    </div>

                                    <div class="d-flex justify-content-between align-items-center mb-4">
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" id="rememberMe"
                                                name="RememberMe" />
                                            <label class="form-check-label" for="rememberMe">Ghi nhớ tôi</label>
                                        </div>
                                        <a asp-action="ForgetPass" asp-controller="Account"
                                            class="text-primary text-decoration-none">
                                            <i class="fas fa-key me-1"></i>Quên mật khẩu?
                                        </a>
                                    </div>

                                    <button type="submit" class="btn btn-primary btn-lg w-100 mb-3 btn-login"
                                        id="loginButton">
                                        <span id="loginText"><i class="fas fa-sign-in-alt me-2"></i>Đăng nhập</span>
                                        <span class="spinner-border spinner-border-sm d-none" id="loginSpinner"
                                            role="status"></span>
                                    </button>

                                    <div class="divider my-4">
                                        <span>hoặc</span>
                                    </div>

                                    <a asp-action="LoginByGoogle" asp-controller="Account"
                                        class="btn btn-outline-danger btn-lg w-100 mb-3">
                                        <i class="fab fa-google me-2"></i>Đăng nhập bằng Google
                                    </a>

                                    <div class="text-center mt-4">
                                        <p class="text-muted mb-0">
                                            Chưa có tài khoản?
                                            <a asp-action="Create" asp-controller="Account"
                                                class="text-primary fw-semibold text-decoration-none">
                                                Đăng ký ngay
                                            </a>
                                        </p>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>



@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        $(document).ready(function () {
            // Toggle password visibility
            $("#togglePassword").click(function () {
                var passwordInput = $("#passwordInput");
                var icon = $(this).find("i");
                if (passwordInput.attr("type") === "password") {
                    passwordInput.attr("type", "text");
                    icon.removeClass("fa-eye").addClass("fa-eye-slash");
                } else {
                    passwordInput.attr("type", "password");
                    icon.removeClass("fa-eye-slash").addClass("fa-eye");
                }
            });

            // Show loading spinner on form submit
            $("form").submit(function () {
                $("#loginText").addClass("d-none");
                $("#loginSpinner").removeClass("d-none");
                $("#loginButton").prop("disabled", true);
            });

            // Add floating label effect
            $('.form-control').on('focus', function () {
                $(this).parent().addClass('focused');
            }).on('blur', function () {
                if (!$(this).val()) {
                    $(this).parent().removeClass('focused');
                }
            });
        });
    </script>
}