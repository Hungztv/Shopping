@model IEnumerable<ProductModel>
@{
    ViewData["Title"] = "Quản lý sản phẩm";
}

<div class="container-fluid p-0 fade-in">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="page-title">
            <i class="fas fa-box"></i> Danh sách sản phẩm
        </h2>
        <a class="btn-custom-primary" asp-action="Create" asp-controller="Product">
            <i class="fas fa-plus-circle"></i> Thêm sản phẩm mới
        </a>
    </div>

    <div class="table-custom">
        <table class="table" id="myTable">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Tên sản phẩm</th>
                    <th>Hình ảnh</th>
                    <th>Giá bán</th>
                    <th>Số lượng</th>
                    <th>Đã bán</th>
                    <th>Danh mục</th>
                    <th>Thương hiệu</th>
                    <th>Hành động</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td><strong>#@item.Id</strong></td>
                        <td>
                            <div style="max-width: 250px;">
                                <strong>@item.Name</strong>
                            </div>
                        </td>
                        <td>
                            <img src="@(item.Image.StartsWith("http") ? item.Image : Url.Content("~/media/products/" + item.Image))"
                                width="80px" height="80px" alt="@item.Name" style="object-fit: cover;" />
                        </td>
                        <td>
                            <span class="badge-custom badge-success-custom">
                                @string.Format(new System.Globalization.CultureInfo("vi-VN"), "{0:N0} VNĐ", item.Price)
                            </span>
                        </td>
                        <td>
                            @if (item.Quantity == 0)
                            {
                                <span class="badge-custom badge-danger-custom">
                                    <i class="fas fa-exclamation-triangle"></i> Hết hàng
                                </span>
                            }
                            else if (item.Quantity < 10)
                            {
                                <span class="badge-custom badge-warning-custom">
                                    <i class="fas fa-box"></i> @item.Quantity
                                </span>
                            }
                            else
                            {
                                <span class="badge-custom badge-success-custom">
                                    <i class="fas fa-box"></i> @item.Quantity
                                </span>
                            }
                        </td>
                        <td>
                            <span class="badge-custom badge-info-custom">
                                <i class="fas fa-chart-line"></i> @item.SoldOut
                            </span>
                        </td>
                        <td>@item.Category.Name</td>
                        <td>@item.Brand.Name</td>
                        <td>
                            <div class="d-flex gap-2">
                                <a class="btn btn-sm btn-custom-warning" asp-action="CreateProductQuantity"
                                    asp-controller="Product" asp-route-Id="@item.Id" title="Thêm số lượng">
                                    <i class="fas fa-plus"></i>
                                </a>
                                <a class="btn btn-sm btn-custom-success" asp-action="Edit" asp-controller="Product"
                                    asp-route-Id="@item.Id" title="Chỉnh sửa">
                                    <i class="fas fa-edit"></i>
                                </a>
                                <form asp-action="Delete" asp-controller="Product" asp-route-Id="@item.Id" method="post"
                                    style="display: inline;"
                                    onsubmit="return confirm('Bạn có chắc chắn muốn xóa sản phẩm này?');">
                                    <button type="submit" class="btn btn-sm btn-custom-danger" title="Xóa">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </form>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>